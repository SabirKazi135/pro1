<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coffee Machine (₹)</title>
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background-color: #1a1a1a;
        color: #eaeaea;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }

      .container {
        text-align: center;
        background: linear-gradient(145deg, #222222, #1a1a1a);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 5px 5px 15px #0f0f0f, -5px -5px 15px #292929;
        width: 90%;
        max-width: 1000px;
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #ffcc00;
      }

      .menu-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .coffee-button {
        background-color: #333;
        border: 1px solid #444;
        padding: 15px;
        color: #eaeaea;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s, background-color 0.2s;
        text-align: center;
        font-size: 1rem;
      }

      /* .coffee-button:hover {
        background-color: #444;
        transform: scale(1.05);
      } */

      .coffee-button span {
        display: block;
        font-size: 0.9rem;
        color: #ffcc00;
        margin-top: 5px;
      }

      .output {
        margin-top: 20px;
        background-color: #2b2b2b;
        padding: 20px;
        border-radius: 10px;
        text-align: left;
        font-size: 1rem;
        color: #eaeaea;
        white-space: pre-wrap;
        max-height: 300px;
        overflow-y: auto;
      }

      .output h3 {
        color: #ffcc00;
        margin-bottom: 10px;
      }

      .output p {
        margin-bottom: 10px;
        line-height: 1.5;
      }

      .output .highlight {
        font-weight: bold;
        color: #4caf50;
      }

      .action-buttons {
        margin-top: 20px;
      }

      button {
        background-color: #4caf50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        margin: 10px 5px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      button:hover {
        background-color: #45a049;
      }

      button.report-btn {
        background-color: #ff5722;
      }

      button.report-btn:hover {
        background-color: #e64a19;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Modern Coffee Machine (₹)</h1>
      <div class="menu-container" id="menu-container"></div>
      <div class="action-buttons">
        <button class="report-btn" onclick="showMachineReport()">
          View Machine Report
        </button>
      </div>
      <div class="output" id="output">
        <h3>Output</h3>
        <p>Select a coffee to see details...</p>
      </div>
    </div>

    <script>
      // Menu and resources data
      const menu = {
        espresso: {
          ingredients: { water: 50, coffee: 18, sugar: 10 },
          cost: 15,
        },
        latte: {
          ingredients: { water: 200, milk: 150, coffee: 24, sugar: 15 },
          cost: 25,
        },
        cappuccino: {
          ingredients: { water: 250, milk: 100, coffee: 24, chocolate: 20 },
          cost: 30,
        },
        mocha: {
          ingredients: {
            water: 200,
            milk: 150,
            coffee: 24,
            chocolate: 30,
            sugar: 10,
          },
          cost: 35,
        },
        blackCoffee: {
          ingredients: { water: 150, coffee: 20, sugar: 5 },
          cost: 10,
        },
        vanillaLatte: {
          ingredients: {
            water: 200,
            milk: 150,
            coffee: 24,
            sugar: 15,
            vanilla: 5,
          },
          cost: 40,
        },
        caramelMacchiato: {
          ingredients: {
            water: 200,
            milk: 150,
            coffee: 24,
            sugar: 10,
            caramel: 20,
          },
          cost: 45,
        },
        americano: { ingredients: { water: 250, coffee: 20 }, cost: 20 },
        flatWhite: {
          ingredients: { water: 150, milk: 200, coffee: 24 },
          cost: 28,
        },
        irishCoffee: {
          ingredients: {
            water: 200,
            coffee: 24,
            sugar: 20,
            cream: 30,
            whiskey: 15,
          },
          cost: 50,
        },
      };

      let resources = {
        water: 5000,
        milk: 3000,
        coffee: 2000,
        sugar: 1000,
        chocolate: 800,
        vanilla: 500,
        caramel: 600,
        cream: 700,
        whiskey: 200,
      };

      let money = 0;
      const output = document.getElementById("output");
      const menuContainer = document.getElementById("menu-container");

      // Display coffee menu
      function displayMenu() {
        for (const drink in menu) {
          const button = document.createElement("div");
          button.className = "coffee-button";
          button.innerHTML = `${
            drink.charAt(0).toUpperCase() + drink.slice(1)
          } <span>₹${menu[drink].cost}</span>`;
          button.onclick = () => orderDrink(drink);
          menuContainer.appendChild(button);
        }
      }

      // Check if there are enough resources for the drink
      function checkResources(drink) {
        const ingredients = menu[drink].ingredients;
        for (const item in ingredients) {
          if (resources[item] < ingredients[item]) {
            return `Sorry, not enough ${item}.`;
          }
        }
        return "success";
      }

      // Update resources after a drink is made
      function updateResources(drink) {
        const ingredients = menu[drink].ingredients;
        for (const item in ingredients) {
          resources[item] -= ingredients[item];
        }
      }

      // Process order and handle payments
      function processOrder(drink, amountPaid) {
        const cost = menu[drink].cost;
        if (amountPaid < cost) {
          return "Sorry, that's not enough money. Money refunded.";
        }

        money += cost;
        updateResources(drink);
        const change = (amountPaid - cost).toFixed(2);

        return `Here is your <span class="highlight">${drink}</span>. Enjoy!<br>Ingredients used:<br>${listIngredients(
          drink
        )}<br>Change: ₹<span class="highlight">${change}</span><br><br>Remaining resources:<br>${generateReport()}`;
      }

      // List ingredients used for a specific drink
      function listIngredients(drink) {
        const ingredients = menu[drink].ingredients;
        return Object.entries(ingredients)
          .map(
            ([key, value]) =>
              `- ${key.charAt(0).toUpperCase() + key.slice(1)}: ${value}`
          )
          .join("<br>");
      }

      // Generate machine report
      function generateReport() {
        return `Water: ${resources.water}ml<br>Milk: ${
          resources.milk
        }ml<br>Coffee: ${resources.coffee}g<br>Sugar: ${
          resources.sugar
        }g<br>Chocolate: ${resources.chocolate}g<br>Vanilla: ${
          resources.vanilla
        }g<br>Caramel: ${resources.caramel}g<br>Cream: ${
          resources.cream
        }g<br>Whiskey: ${resources.whiskey}g<br>Money: ₹${money.toFixed(2)}`;
      }

      // Handle order click
      function orderDrink(drink) {
        const resourceCheck = checkResources(drink);
        if (resourceCheck !== "success") {
          output.innerHTML = `<h3>Error</h3><p>${resourceCheck}</p>`;
          return;
        }

        const amountPaid =
          parseFloat(
            prompt(
              `The cost is ₹${menu[drink].cost}. Enter the amount you are paying:`
            )
          ) || 0;

        output.innerHTML = `<h3>Order Details</h3><p>${processOrder(
          drink,
          amountPaid
        )}</p>`;
      }

      // View the machine's resource report
      function showMachineReport() {
        output.innerHTML = `<h3>Machine Report</h3><p>${generateReport()}</p>`;
      }

      displayMenu();
    </script>
  </body>
</html>
